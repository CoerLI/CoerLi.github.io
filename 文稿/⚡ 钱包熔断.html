<!DOCTYPE html>
<!-- saved from url=(0077)http://phabricator.huobidev.com/w/product_design/risk/wallet_circuit_breaker/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>⚡ 钱包熔断</title><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"><link rel="mask-icon" color="#3D4B67" href="http://phabricator.huobidev.com/res/phabricator/e132a80f/rsrc/favicons/mask-icon.svg"><link rel="apple-touch-icon" sizes="76x76" href="http://phabricator.huobidev.com/file/data/zvkn43g42iywkiyjzeu7/PHID-FILE-fbfh3xfcevni35kanzcs/favicon"><link rel="apple-touch-icon" sizes="120x120" href="http://phabricator.huobidev.com/file/data/vbjiktb5qebcedzwkix4/PHID-FILE-ppuw3jfgmmh3wlir53rn/favicon"><link rel="apple-touch-icon" sizes="152x152" href="http://phabricator.huobidev.com/file/data/wqytuw75d3sfw2q5xwej/PHID-FILE-tmz23ntm3ei3tizokzc2/favicon"><link href="http://phabricator.huobidev.com/file/data/d4iomwdic4tth23es3rp/PHID-FILE-legkto3b62wizgdeit6e/favicon" id="favicon" rel="shortcut icon"><meta name="referrer" content="no-referrer"><link rel="stylesheet" type="text/css" href="./⚡ 钱包熔断_files/core.pkg.css"><link rel="stylesheet" type="text/css" href="./⚡ 钱包熔断_files/phui-document.css"><link rel="stylesheet" type="text/css" href="./⚡ 钱包熔断_files/phui-document-pro.css"><link rel="stylesheet" type="text/css" href="./⚡ 钱包熔断_files/conpherence.pkg.css"><script type="text/javascript" src="./⚡ 钱包熔断_files/init.js"></script></head><body class="device-desktop platform-mac phui-theme-blindigo" id=""><div class="main-page-frame" id="main-page-frame" data-autoid="autoid_1"><div id="phabricator-standard-page" class="phabricator-standard-page"><div class="phabricator-main-menu phabricator-main-menu-background" id="UQ0_22"><a class=" phabricator-core-user-menu phabricator-core-user-mobile-menu" href="http://phabricator.huobidev.com/w/product_design/risk/wallet_circuit_breaker/#" role="button" data-sigil="phui-dropdown-menu" data-meta="0_26"><span class="aural-only">Page Menu</span><span class="visual-only phui-icon-view phui-font-fa fa-bars" data-meta="0_27" aria-hidden="true"></span><span class="caret"></span></a><a class="phabricator-main-menu-search-button phabricator-expand-application-menu" data-sigil="jx-toggle-class" data-meta="0_25"><span class="phabricator-menu-button-icon phui-icon-view phui-font-fa fa-search" id="UQ0_45"></span></a><a class="phabricator-main-menu-brand" href="http://phabricator.huobidev.com/"><span class="aural-only">Home</span><span class="phabricator-main-menu-eye" style=""></span><span class="phabricator-wordmark">Huobi Phabricator</span></a><div class="visual-only phabricator-main-menu-alerts" aria-hidden="true"><a href="http://phabricator.huobidev.com/notification/" class="alert-notifications" id="UQ0_28" data-autoid="autoid_3"><span class="phabricator-main-menu-alert-icon phui-icon-view phui-font-fa fa-bell" data-sigil="menu-icon"></span><span id="UQ0_26" class="phabricator-main-menu-alert-count">0</span></a><a href="http://phabricator.huobidev.com/conpherence/" class="alert-notifications" id="UQ0_23" data-autoid="autoid_2"><span class="phabricator-main-menu-message-icon phui-icon-view phui-font-fa fa-comments" data-sigil="menu-icon"></span><span id="UQ0_24" class="phabricator-main-menu-message-count">0</span></a></div><span class="aural-only">No messages. No notifications.</span><ul class="phui-list-view phabricator-search-menu"><li class="phui-list-item-view phui-list-item-type-link phabricator-main-menu-search"><div class=""><form action="http://phabricator.huobidev.com/search/" method="POST"><input type="hidden" name="__csrf__" value="B@shjpusjc618558c016a8c717"><input type="hidden" name="__form__" value="1"><div class="phabricator-main-menu-search-container"><input type="text" name="query" id="UQ0_46" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" data-autoid="autoid_7" class=" jx-typeahead-placeholder"><button id="UQ0_77" class="phui-icon-view phui-font-fa fa-search" data-autoid="autoid_9"><span class="aural-only">Search</span></button><button class="button dropdown has-icon phui-button-default phabricator-main-menu-search-dropdown" id="UQ0_78" data-sigil="global-search-dropdown" data-meta="0_28"><span class="aural-only">Configure Global Search</span><span class="visual-only phui-icon-view phui-font-fa fa-globe" data-sigil="global-search-dropdown-icon" data-meta="0_29" aria-hidden="true"></span><span class="caret"></span></button><input type="hidden" name="search:scope" value="all" data-sigil="global-search-dropdown-input"><input type="hidden" id="UQ0_79" name="search:application" value="PhabricatorPhrictionApplication" data-sigil="global-search-dropdown-app"><input type="hidden" name="search:primary" value="true"><div id="UQ0_76" class="phabricator-main-menu-search-target"></div></div></form></div></li></ul><div id="UQ0_27" class="phabricator-notification-menu" style="display: none;" data-sigil="phabricator-notification-menu"></div><div id="UQ0_25" class="phabricator-notification-menu" style="display: none;" data-sigil="phabricator-notification-menu"></div><a class=" phabricator-core-user-menu" href="http://phabricator.huobidev.com/p/lihang/" role="button" id="UQ0_57" data-autoid="autoid_5"><span class="aural-only">Account Menu</span><span style="background-image: url(http://phabricator.huobidev.com/file/data/xwwpo3xnzrt34zuevn4e/PHID-FILE-yulqo4mmechuh6yyq4rf/d898be-alphanumeric_lato-white_L.png-0%2C0%2C0%2C0.3.png);" class="visual-only phui-icon-view phuihead-small" data-meta="0_30" aria-hidden="true"></span><span class="caret"></span></a><a class=" phabricator-core-user-menu" href="http://phabricator.huobidev.com/w/product_design/risk/wallet_circuit_breaker/#" role="button" data-sigil="phui-dropdown-menu" data-meta="0_31"><span class="aural-only">Favorites Menu</span><span class="visual-only phui-icon-view phui-font-fa fa-star" data-meta="0_32" aria-hidden="true"></span><span class="caret"></span></a></div><div id="phabricator-standard-page-body" class="phabricator-standard-page-body"><div class="phui-crumbs-view phui-crumbs-border"><div class="phui-crumbs-actions"><a href="http://phabricator.huobidev.com/phriction/" class="phui-crumbs-action" data-sigil=""><span class="visual-only phui-icon-view phui-font-fa fa-home" data-meta="0_33" aria-hidden="true"></span><span class="phui-crumbs-action-name">Index</span></a><a href="http://phabricator.huobidev.com/phriction/new/?slug=product_design/risk/wallet_circuit_breaker/" class="phui-crumbs-action" data-sigil="workflow"><span class="visual-only phui-icon-view phui-font-fa fa-plus-square" data-meta="0_34" aria-hidden="true"></span><span class="phui-crumbs-action-name">New Document</span></a></div><a href="http://phabricator.huobidev.com/w/" class="phui-crumb-view phui-crumb-has-icon"><span class="visual-only phui-icon-view phui-font-fa fa-book" data-meta="0_35" aria-hidden="true"></span><span class="phui-crumb-name"> Phriction</span> </a><span class="visual-only phui-icon-view phui-font-fa fa-angle-right phui-crumb-divider phui-crumb-view" data-meta="0_36" aria-hidden="true"></span><a href="http://phabricator.huobidev.com/w/" class="phui-crumb-view"><span class="phui-crumb-name"> 火币内网 wiki</span> </a><span class="visual-only phui-icon-view phui-font-fa fa-angle-right phui-crumb-divider phui-crumb-view" data-meta="0_37" aria-hidden="true"></span><a href="http://phabricator.huobidev.com/w/product_design/" class="phui-crumb-view"><span class="phui-crumb-name"> 集团产品设计中心</span> </a><span class="visual-only phui-icon-view phui-font-fa fa-angle-right phui-crumb-divider phui-crumb-view" data-meta="0_38" aria-hidden="true"></span><a href="http://phabricator.huobidev.com/w/product_design/risk/" class="phui-crumb-view"><span class="phui-crumb-name"> 风控系统</span> </a><span class="visual-only phui-icon-view phui-font-fa fa-angle-right phui-crumb-divider phui-crumb-view" data-meta="0_39" aria-hidden="true"></span><a href="http://phabricator.huobidev.com/w/product_design/risk/wallet_circuit_breaker/" class="phui-crumb-view phabricator-last-crumb"><span class="phui-crumb-name"> 钱包熔断</span> </a></div><div class="phui-document-container "><div class="phui-document-view phui-document-view-pro has-curtain"><div class="phui-document-content"><div class="phui-document-inner"><div class="phui-document-toc-container" id="UQ0_1"><a class="button has-icon phui-button-simple phui-document-toc" role="button" data-sigil="jx-toggle-class" data-meta="0_6"><span class="visual-only phui-icon-view phui-font-fa fa-align-left" data-meta="0_7" aria-hidden="true"></span></a><div class="phui-list-sidenav phui-document-toc-list"><div class="phui-document-toc-content"><div class="phui-document-toc-header">Contents</div><ul>
<li><a href="http://phabricator.huobidev.com/w/product_design/risk/wallet_circuit_breaker/#1">需求背景</a></li>
<li><a href="http://phabricator.huobidev.com/w/product_design/risk/wallet_circuit_breaker/#2">概述</a></li>
<ul>
<li><a href="http://phabricator.huobidev.com/w/product_design/risk/wallet_circuit_breaker/#3">功能概述</a></li>
<li><a href="http://phabricator.huobidev.com/w/product_design/risk/wallet_circuit_breaker/#4">业务概述</a></li>
<ul>
<li><a href="http://phabricator.huobidev.com/w/product_design/risk/wallet_circuit_breaker/#5">风控因子说明</a></li>
<ul>
<li><a href="http://phabricator.huobidev.com/w/product_design/risk/wallet_circuit_breaker/#6">风控因子举例说明</a></li>
</ul>
<li><a href="http://phabricator.huobidev.com/w/product_design/risk/wallet_circuit_breaker/#7">触发动作说明</a></li>
</ul>
</ul>
</ul></div></div></div><div class="phui-header-shell phui-header-tall "><h1 class="phui-header-view"><div class="phui-header-row"><div class="phui-header-col2"><span class="phui-header-header">钱包熔断</span><div class="phui-header-subheader"><span class="phui-tag-view phui-tag-type-shade phui-tag-shade phui-tag-icon-view "><span class="phui-tag-core "><span class="visual-only phui-icon-view phui-font-fa fa-clock-o bluegrey" data-meta="0_24" aria-hidden="true"></span>Updated Today</span></span><span class="policy-header-callout"><span class="visual-only phui-icon-view phui-font-fa fa-users bluegrey" data-meta="0_23" aria-hidden="true"></span><a class="policy-link" href="http://phabricator.huobidev.com/policy/explain/PHID-WIKI-2dmdhuh26zojoxb666tb/view/" data-sigil="workflow">All Users</a></span></div></div><div class="phui-header-col3"><div class="phui-header-action-links"><a class="button button-grey has-icon has-text phui-button-default phui-mobile-menu msl phui-header-action-link" href="http://phabricator.huobidev.com/w/product_design/risk/wallet_circuit_breaker/#" role="button" data-sigil="phui-dropdown-menu" data-meta="0_20"><span class="visual-only phui-icon-view phui-font-fa fa-bars" data-meta="0_21" aria-hidden="true"></span><div class="phui-button-text">Actions</div></a></div></div></div></h1></div><div class="phui-document-curtain"><div class=""><div class="phui-box phui-box-border phui-object-box mlt mll mlr phui-two-column-properties"><ul class="phabricator-action-list-view " id="UQ0_0"><li id="UQ0_3" class="phabricator-action-view phabricator-action-view-disabled phabricator-action-view-href action-has-icon" style=""><a href="http://phabricator.huobidev.com/phriction/edit/10681/" class="phabricator-action-view-item"><span class="visual-only phui-icon-view phui-font-fa fa-pencil grey phabricator-action-view-icon" data-meta="0_8" aria-hidden="true"></span>Edit Document</a></li><li id="UQ0_5" class="phabricator-action-view phabricator-action-view-href action-has-icon" style=""><a href="http://phabricator.huobidev.com/phriction/history/product_design/risk/wallet_circuit_breaker/" class="phabricator-action-view-item"><span class="visual-only phui-icon-view phui-font-fa fa-history phabricator-action-view-icon" data-meta="0_9" aria-hidden="true"></span>View History</a></li><li id="UQ0_7" class="phabricator-action-view phabricator-action-view-disabled phabricator-action-view-href action-has-icon" style=""><a href="http://phabricator.huobidev.com/phriction/publish/10681/153430/" class="phabricator-action-view-item" data-sigil="workflow"><span class="visual-only phui-icon-view phui-font-fa fa-upload grey phabricator-action-view-icon" data-meta="0_10" aria-hidden="true"></span>Publish (Prototype!)</a></li><li id="UQ0_9" class="phabricator-action-view phabricator-action-view-disabled phabricator-action-view-href action-has-icon" style=""><a href="http://phabricator.huobidev.com/phriction/move/10681/" class="phabricator-action-view-item" data-sigil="workflow"><span class="visual-only phui-icon-view phui-font-fa fa-arrows grey phabricator-action-view-icon" data-meta="0_11" aria-hidden="true"></span>Move Document</a></li><li id="UQ0_11" class="phabricator-action-view phabricator-action-view-disabled phabricator-action-view-href action-has-icon" style=""><a href="http://phabricator.huobidev.com/phriction/delete/10681/" class="phabricator-action-view-item" data-sigil="workflow"><span class="visual-only phui-icon-view phui-font-fa fa-times grey phabricator-action-view-icon" data-meta="0_12" aria-hidden="true"></span>Delete Document</a></li><li id="UQ0_13" class="phabricator-action-view phabricator-action-view-href action-has-icon" style=""><a href="http://phabricator.huobidev.com/w/product_design/risk/wallet_circuit_breaker/?__print__=1" class="phabricator-action-view-item" target="_blank" rel="noreferrer"><span class="visual-only phui-icon-view phui-font-fa fa-print phabricator-action-view-icon" data-meta="0_13" aria-hidden="true"></span>Printable Page</a></li><li id="UQ0_15" class="phabricator-action-view phabricator-action-view-href action-has-icon" style=""><form action="http://phabricator.huobidev.com/subscriptions/add/PHID-WIKI-2dmdhuh26zojoxb666tb/" method="POST" data-sigil="workflow"><input type="hidden" name="__csrf__" value="B@shjpusjc618558c016a8c717"><input type="hidden" name="__form__" value="1"><button class="phabricator-action-view-item"><span class="visual-only phui-icon-view phui-font-fa fa-plus-circle phabricator-action-view-icon" data-meta="0_14" aria-hidden="true"></span>Subscribe</button></form></li><li id="UQ0_17" class="phabricator-action-view phabricator-action-view-href action-has-icon" style=""><a href="http://phabricator.huobidev.com/subscriptions/mute/PHID-WIKI-2dmdhuh26zojoxb666tb/" class="phabricator-action-view-item" data-sigil="workflow"><span class="visual-only phui-icon-view phui-font-fa fa-volume-up phabricator-action-view-icon" data-meta="0_15" aria-hidden="true"></span>Mute Notifications</a></li><li id="UQ0_19" class="phabricator-action-view phabricator-action-view-href action-has-icon" style=""><a href="http://phabricator.huobidev.com/token/give/PHID-WIKI-2dmdhuh26zojoxb666tb/" class="phabricator-action-view-item" data-sigil="workflow"><span class="visual-only phui-icon-view phui-font-fa fa-trophy phabricator-action-view-icon" data-meta="0_16" aria-hidden="true"></span>Award Token</a></li><li id="UQ0_21" class="phabricator-action-view phabricator-action-view-href action-has-icon" style=""><a href="http://phabricator.huobidev.com/flag/edit/PHID-WIKI-2dmdhuh26zojoxb666tb/" class="phabricator-action-view-item" data-sigil="workflow"><span class="visual-only phui-icon-view phui-font-fa fa-flag phabricator-action-view-icon" data-meta="0_17" aria-hidden="true"></span>Flag For Later</a></li></ul><div class="phui-curtain-panel "><div class="phui-curtain-panel-header">Tags</div><div class="phui-curtain-panel-body"><ul class="phabricator-handle-tag-list "><li class="phabricator-handle-tag-list-item"><a href="http://phabricator.huobidev.com/tag/%E4%BA%A7%E5%93%81%E8%AE%BE%E8%AE%A1/" class="phui-tag-view phui-tag-type-shade phui-tag-green phui-tag-shade phui-tag-icon-view " data-sigil="hovercard" data-meta="0_19"><span class="phui-tag-core "><span class="visual-only phui-icon-view phui-font-fa fa-briefcase" data-meta="0_18" aria-hidden="true"></span>产品设计</span></a></li></ul></div></div><div class="phui-curtain-panel "><div class="phui-curtain-panel-header">Subscribers</div><div class="phui-curtain-panel-body"><a href="http://phabricator.huobidev.com/p/leiruihan/" class="phui-handle phui-link-person" data-sigil="hovercard" data-meta="0_3">leiruihan</a>, <a href="http://phabricator.huobidev.com/p/yuyangyang/" class="phui-handle phui-link-person" data-sigil="hovercard" data-meta="0_4">yuyangyang</a>, <a href="http://phabricator.huobidev.com/p/liusimeng/" class="phui-handle phui-link-person" data-sigil="hovercard" data-meta="0_5">liusimeng</a></div></div></div></div></div><div class="phui-document-content-view"><div class="phabricator-remarkup"><h2 class="remarkup-header"><a name="1"></a>需求背景</h2>

<p>进行原先PHP系统的钱包熔断功能的迁移同时进行迭代，以便满足global更好的业务变化，以及多钱包的支持。<br>
在对原先的钱包熔断规则的兼容、迁移的前提下，进行规则的升级以及多站点的支持，特别是针对日本等站点进行钱包独立部署的也可以进行集团钱包统一管理、分别熔断的需求，以减少独立钱包部署时，功能的重复开发，浪费研发资源等情况的发生。</p>

<h2 class="remarkup-header"><a name="2"></a>概述</h2>

<h3 class="remarkup-header"><a name="3"></a>功能概述</h3>

<p></p><div class="phabricator-remarkup-embed-layout-left"><a href="http://phabricator.huobidev.com/file/data/gaolnnxvi7okzkpvced7/PHID-FILE-f6eu4iqnw2jsbztd2g2v/image.png" class="phabricator-remarkup-embed-image" data-sigil="lightboxable" data-meta="0_0"><img src="./⚡ 钱包熔断_files/preview-image.png" width="220" height="66.988764044944"></a></div><p></p>

<ul class="remarkup-list">
<li class="remarkup-list-item">1、通过规则设置进行币种熔断规则的配置</li>
<li class="remarkup-list-item">2、通过钱包状态，可对钱包当前状态进行查看，并可操作手动熔断与解除熔断操作以及数据补采行为</li>
<li class="remarkup-list-item">3、流水记录便于使用人员对业务、钱包流水进行核对</li>
<li class="remarkup-list-item">4、熔断日志，用于进行熔断记录相关的业务、钱包流水关联，并对其不平流水进行处理操作</li>
</ul>

<p><strong>功能文档入口</strong><br>
<del><a href="http://phabricator.huobidev.com/w/product_design/risk/wallet_circuit_breaker/%E7%86%94%E6%96%AD%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/" class="remarkup-link" target="_blank" rel="noreferrer">熔断基础设置wiki</a></del>(本wiki不做，沿用风控系统的规则设置)<br>
<a href="http://phabricator.huobidev.com/w/product_design/risk/wallet_circuit_breaker/%E5%AF%B9%E8%B4%A6%E6%B5%81%E6%B0%B4/" class="remarkup-link" target="_blank" rel="noreferrer">对账流水wiki</a><br>
<a href="http://phabricator.huobidev.com/w/product_design/risk/wallet_circuit_breaker/%E7%86%94%E6%96%AD%E6%97%A5%E5%BF%97/" class="remarkup-link" target="_blank" rel="noreferrer">熔断历史wiki</a><br>
<a href="http://phabricator.huobidev.com/w/product_design/risk/wallet_circuit_breaker/%E9%92%B1%E5%8C%85%E7%8A%B6%E6%80%81/" class="remarkup-link" target="_blank" rel="noreferrer">币种状态wiki</a></p>

<h3 class="remarkup-header"><a name="4"></a>业务概述</h3>

<p>钱包提供流水采集接口，DW一期可直接读业务从库数据。</p>

<ul class="remarkup-list">
<li class="remarkup-list-item">1、通过采集钱包、与DW的充提币流水，分别对充提进行流水比对，当超过阈值范围进行熔断（或手动进行熔断）</li>
</ul>

<ul class="remarkup-list">
<li class="remarkup-list-item">2、熔断后通知钱包、mgt，该币种将不再允许提币订单向区块的发起（钱包拒绝），以及提币订单的审核（mgt无法审核）</li>
</ul>

<ul class="remarkup-list">
<li class="remarkup-list-item">3、通过补采或处理流水记录达到帐平后可自动解除熔断，或者进行人工手动解除熔断后，恢复上述相应操作，允许钱包向区块进行发币，mgt进行提币审核。</li>
</ul>

<p><strong>提币熔断</strong><br>
</p><div class="phabricator-remarkup-embed-layout-left"><a href="http://phabricator.huobidev.com/file/data/6jz3jc6ak6e5ecsqmh6y/PHID-FILE-axvh2fmj775wiklie7la/image.png" class="phabricator-remarkup-embed-image" data-sigil="lightboxable" data-meta="0_1"><img src="./⚡ 钱包熔断_files/preview-image(1).png" width="167.4801061008" height="220"></a></div><br>
判断逻辑：<br>
提币熔断以钱包订单数据比对DW订单数据，<p></p>

<ul class="remarkup-list">
<li class="remarkup-list-item">如钱包提币数据少于DW订单数据，无安全风险</li>
<li class="remarkup-list-item">如钱包提币数据多于DW订单数据，为多出账，有安全风险，进行熔断</li>
</ul>

<p><strong>充币熔断</strong><br>
</p><div class="phabricator-remarkup-embed-layout-left"><a href="http://phabricator.huobidev.com/file/data/yempbifmyqhqcvj7duka/PHID-FILE-4wnvioqzbrjzcikdpq34/image.png" class="phabricator-remarkup-embed-image" data-sigil="lightboxable" data-meta="0_2"><img src="./⚡ 钱包熔断_files/preview-image(2).png" width="220" height="213.40659340659"></a></div><br>
判断逻辑：<br>
充币熔断以DW订单数据比对钱包充币数据，<p></p>

<ul class="remarkup-list">
<li class="remarkup-list-item">如DW订单数据少于钱包充币数据，无安全风险</li>
<li class="remarkup-list-item">如DW订单数据多于钱包充币数据，为多充值，有安全风险，进行熔断</li>
</ul>

<p><strong>熔断说明</strong><br>
熔断分为系统熔断、人工熔断</p>

<p>人工熔断的优先级高于系统熔断</p>

<div class="remarkup-table-wrap"><table class="remarkup-table">
<tbody><tr><th>熔断分类</th><th>解除方式</th></tr>
<tr><td>系统熔断</td><td>系统解除</td></tr>
<tr><td>人工熔断</td><td>人工解除</td></tr>
<tr></tr>
</tbody></table></div>

<p>系统熔断后，由于时间的推移或人工处理流水后对上账后，自动进行系统解除<br>
人工熔断后，不管是否该币种账是平的，均需要人工解除熔断</p>

<p><strong>流水比对说明</strong><br>
流水为实时比对，比对时间有效时间 = 该流水前4个小时+该币种阈值设置的时间范围</p>

<p>流水比对时，为确保唯一性，比对规则为：<span class="remarkup-highlight">txhash+(index)+to_address+（tag）+amount</span></p>

<p><span class="remarkup-highlight">由于dw流水没有记index，所以用dw流水的request id中的index与钱包的index进行比对。index有可能为空</span></p>

<p>提币流水，钱包采集状态为business-type=4的流水，与DW采集状态为9,11的流水进行比对<br>
充币流水，DW采集状态为2,5,9,8,12,15的流水，与钱包采集状态为为business-type=1的流水进行比对</p>

<p>比对规则、以及流水表说明详见wiki：<a href="http://phabricator.huobidev.com/w/finance/%E5%AF%B9%E8%B4%A6%E5%AE%9E%E7%8E%B0/interface/" class="remarkup-link" target="_blank" rel="noreferrer">finance-audit钱包熔断逻辑归档</a></p>

<p>当一币多链时，该币的流水资产为累加资产</p>

<hr class="remarkup-hr">

<p>规则说明：<br>
规则优先级(hash+index标识可以确认流水的唯一性)</p>

<div class="remarkup-table-wrap"><table class="remarkup-table">
<tbody><tr><td>级别</td><td>场景</td><td>处置动作</td></tr>
<tr><td>P 0</td><td>当流水的hash+index一样，但是address+tag不一样时</td><td>该币种直接熔断</td></tr>
<tr><td>P 0</td><td>当流水的hash+index一样，但是amount不一样时</td><td>该币种直接熔断</td></tr>
<tr><td>P 1</td><td>手动熔断操作</td><td>该币种直接熔断</td></tr>
<tr><td>P 2</td><td>规则命中触发熔断规则</td><td>该币种直接熔断</td></tr>
<tr></tr>
</tbody></table></div>

<p>其中address+tag、amount不一致规则直接熔断，需写进硬编码中，不允许修改</p>

<p><span class="remarkup-highlight">钱包、mgt提币判断时，如遇币种在钱包熔断系统未进行配置时，该币种不允许提币</span></p>

<h4 class="remarkup-header"><a name="5"></a>风控因子说明</h4>

<p>币种有效精度依照钱包的精度，两边流水对比时，需转成数值形式比对，比如1.00与1.000000为一样的数量<br>
逻辑关系判断符号支持，&gt;、&lt;、&lt;=、&gt;=、=、!=</p>

<div class="remarkup-table-wrap"><table class="remarkup-table">
<tbody><tr><th>风控因子</th><th>计算方式</th></tr>
<tr><td>订单缺失笔数</td><td>计数</td></tr>
<tr><td>订单缺失币种数量</td><td>计数</td></tr>
<tr><td>订单缺失折合金额</td><td>计数（需要币价折合计数）</td></tr>
<tr><td>对账超时时间</td><td>时间差运算</td></tr>
<tr></tr>
</tbody></table></div>



<h5 class="remarkup-header"><a name="6"></a>风控因子举例说明</h5>

<p>A.订单缺失笔数：指充币、提币的订单获取不到（缺失），所导致的笔数不一致的数量，举例，阈值为2</p>

<div class="remarkup-table-wrap"><table class="remarkup-table">
<tbody><tr><td>dw订单</td><td>钱包订单</td></tr>
<tr><td>1</td><td>1</td></tr>
<tr><td>2</td><td>2</td></tr>
<tr><td>3</td><td>-</td></tr>
<tr><td>4</td><td>4</td></tr>
<tr></tr>
</tbody></table></div>

<p>缺失一笔订单，不触发熔断</p>

<p>B.订单缺失币种数量：指充币、提币的订单获取不到（缺失），所导致的可累计币种数量不一致的数量，举例，阈值为2</p>

<div class="remarkup-table-wrap"><table class="remarkup-table">
<tbody><tr><td>dw币种数量</td><td>钱包币种数量</td></tr>
<tr><td>1.231</td><td>1.231</td></tr>
<tr><td>2.32</td><td>2.32</td></tr>
<tr><td>3.5</td><td>-</td></tr>
<tr><td>4.111</td><td>-</td></tr>
<tr></tr>
</tbody></table></div>

<p>订单缺失币种数量为3.5+4.11 &gt;2，触发熔断</p>

<p>C.订单缺失折合金额：指充币、提币的订单获取不到（缺失），所导致的可累计币种数量经过usdt折合后不一致的金额，举例，阈值为2usdt</p>

<div class="remarkup-table-wrap"><table class="remarkup-table">
<tbody><tr><td>dw币种数量</td><td>钱包币种数量</td><td>折合数量</td></tr>
<tr><td>1.231</td><td>1.231</td><td>3.5usdt</td></tr>
<tr><td>2.32</td><td>2.32</td><td>4.5usdt</td></tr>
<tr><td>3.5</td><td>-</td><td>5usdt</td></tr>
<tr><td>4.111</td><td>-</td><td>6.1usdt</td></tr>
<tr></tr>
</tbody></table></div>

<p>订单缺失折合金额为5+6.1 &gt;2，触发熔断</p>

<p>D.对账超时时间：指充币、提币的订单获取不到（缺失），所导致记录对不上的时间超过该时间，举例，阈值为200s</p>

<div class="remarkup-table-wrap"><table class="remarkup-table">
<tbody><tr><td>dw订单</td><td>dw采集时间</td><td>钱包订单</td><td>钱包采集时间</td><td>对账时间</td></tr>
<tr><td>1</td><td>2019-01-0112:00:00</td><td>1</td><td>2019-01-0112:00:00</td><td>2019-01-0112:00:01</td></tr>
<tr><td>2</td><td>2019-01-0112:00:00</td><td>2</td><td>2019-01-0112:00:00</td><td>2019-01-0112:00:01</td></tr>
<tr><td>3</td><td>2019-01-0112:00:00</td><td>3</td><td>-</td><td>-</td></tr>
<tr><td>4</td><td>2019-01-0112:00:00</td><td>4</td><td>2019-01-0112:00:00</td><td>2019-01-0112:00:01</td></tr>
<tr><td>5</td><td>2019-01-0112:04:00</td><td>5</td><td>2019-01-0112:04:00</td><td>2019-01-0112:04:01</td></tr>
<tr></tr>
</tbody></table></div>

<p>第5记录为第二次采集时间，超过200s依然未采集到第3记录的钱包记录，触发熔断</p>

<p>针对上述规则进行综合举例：<br>
有btc、eth两个币种<br>
A规则阈值为2 笔<br>
B规则数量阈值为5 btc和2eth<br>
C规则阈值为2000ms<br>
有如下数据</p>

<div class="remarkup-table-wrap"><table class="remarkup-table">
<tbody><tr><td>dw订单</td><td>dw订单数量</td><td>dw采集时间</td><td>钱包订单</td><td>钱包订单数量</td><td>钱包采集时间</td><td>对账时间</td></tr>
<tr><td>1</td><td>1.5 BTC</td><td>2019-01-0112:00:00</td><td>1</td><td>1.5 BTC</td><td>2019-01-0112:00:00</td><td>2019-01-0112:00:01</td></tr>
<tr><td>2</td><td>3.1 ETH</td><td>2019-01-0112:00:00</td><td>2</td><td>-</td><td>-</td><td>-</td></tr>
<tr><td>3</td><td>4.23 BTC</td><td>2019-01-0112:00:00</td><td>3</td><td>-</td><td>-</td><td>-</td></tr>
<tr><td>4</td><td>5.1 ETH</td><td>2019-01-0112:00:00</td><td>4</td><td>5.1 ETH</td><td>2019-01-0112:00:00</td><td>2019-01-0112:00:01</td></tr>
<tr><td>5</td><td>6.2 BTC</td><td>2019-01-0112:04:00</td><td>5</td><td>6.2 BTC</td><td>2019-01-0112:04:00</td><td>2019-01-0112:04:01</td></tr>
<tr></tr>
</tbody></table></div>

<p>btc、eth对账的笔数均为1，未达到A规则的触发<br>
针对币种btc，达到了2000ms 的时间阈值，触发熔断<br>
针对币种eth，达到了未对齐的币种数量和2000ms 的时间阈值，触发熔断</p>

<h4 class="remarkup-header"><a name="7"></a>触发动作说明</h4>

<p>本期动作分为2个，<br>
1、钱包熔断（除熔断外，要进行通知）<br>
2、通知（邮件、钉钉同时发）</p>

<p>触发【钱包熔断】动作，则针对该币种进行熔断，钱包针对该币种不可提币，mgt针对该币种不可进行提币审核（熔断模板见下述）<br>
触发【通知】动作，对该币种信息进行钉钉和邮件方式通知（钉钉有钉钉机器人公开api），会建一个群进行钉钉通知、邮件名单后续给出</p>

<p>通知模板（通用）：<br>
{coin}币种{yy-mm-dd mm:ss:cc}的流水，触发{rule_name}通知告警，请关注</p>

<hr class="remarkup-hr">

<p><strong>降级处理说明</strong></p>

<div class="remarkup-important"><span class="remarkup-note-word">IMPORTANT:</span> 当服务挂掉，接口返回超时等错误信息时，触发降级处理。即，不进行风控阈值所设置的规则判断，不进行触发规则熔断，如需熔断可进行手动熔断。</div>

<p>由于服务器挂掉，导致接口超时无法访问时，需要发送服务器超时邮件通知，告知相关人员</p>

<p><strong>归档时间</strong><br>
流水采集归档时间为45天</p>

<p><strong>通知说明</strong></p>

<p>系统、人工熔断、解除熔断后，均需要向相关人员发送邮件通知</p>

<p>熔断后，立即发送该模板，除初次发送后，每隔5分钟再次发送，<span class="remarkup-highlight">直到解除熔断，发送最后一封解除熔断邮件</span></p>

<p>熔断模板</p>

<div class="remarkup-code-block" data-code-lang="text" data-sigil="remarkup-code-block"><pre class="remarkup-code">  a)标题格式：【熔断】{currency}'币种'{熔断触发时间yymmddmmsscc}’发生熔断持续’{continue_time}（换算成分钟）‘分钟’；
  b)币种：币种名称；
  c)钱包状态：熔断；
  d)熔断触发时间：熔断发生时间；yyyy年mm月dd日mm:ss；
  e)告警时间：本次计算的时间；
  f)持续时间：告警时间-熔断触发时间，换算成分钟；
  
样例：
          邮件标题：【熔断】etc币种201806181830发生熔断持续10分钟  
正文：
         币种：etc
         钱包状态：熔断
         熔断触发时间：2018年6月18日18:30；
         告警时间：2018年6月18日18:40；
         持续时长：10分钟；</pre></div>

<p>熔断解除模板</p>

<div class="remarkup-code-block" data-code-lang="text" data-sigil="remarkup-code-block"><pre class="remarkup-code">  a)标题格式：【解除熔断】{currency}'币种'{熔断解除时间yymmddmmsscc}解除熔断；
  b)币种：币种名称；
  c)钱包状态：解除熔断；
  d)熔断触发时间：熔断发生时间；yyyy年mm月dd日mm:ss；
  e)熔断解除时间：熔断解除时间；yyyy年mm月dd日mm:ss；
  f)持续时间：告警时间-熔断触发时间，换算成分钟；
  j)解除人：操作人名称
  
样例：
          邮件标题：【解除熔断】etc币种201806181830解除熔断
正文：
         币种：etc
         钱包状态：熔断
         熔断触发时间：2018年6月18日18:30；
         熔断解除时间：2018年6月18日18:40；
         持续时长：10分钟；
         解除人：admin</pre></div></div></div></div></div></div></div><div class="phui-document-view-pro-box"><div class="phui-property-list-view "><div class="phui-property-list-section"><div class="phui-property-list-container grouped"><div class="phui-property-list-properties-wrap "><dl class="phui-property-list-properties"><dt class="phui-property-list-key">Last Author </dt><dd class="phui-property-list-value"><a href="http://phabricator.huobidev.com/p/liusimeng/" class="phui-handle phui-link-person">liusimeng</a> </dd><dt class="phui-property-list-key">Last Edited </dt><dd class="phui-property-list-value">Tue, Jan 29, 9:53 AM </dd></dl></div></div></div></div></div><div class="phui-document-view-pro-box"><div class="phui-box phui-box-border phui-object-box mlt mll mlr "><div class="phui-header-shell "><h1 class="phui-header-view"><div class="phui-header-row"><div class="phui-header-col2"><span class="phui-header-header">Document Hierarchy</span></div><div class="phui-header-col3"></div></div></h1></div><div class="phabricator-remarkup mlt mlb"><ul class="remarkup-list"><li class="remarkup-list-item"><a href="http://phabricator.huobidev.com/w/product_design/risk/wallet_circuit_breaker/%E5%AF%B9%E8%B4%A6%E6%B5%81%E6%B0%B4/">对账流水</a></li><li class="remarkup-list-item"><a href="http://phabricator.huobidev.com/w/product_design/risk/wallet_circuit_breaker/%E9%92%B1%E5%8C%85%E7%8A%B6%E6%80%81/">币种状态</a></li><li class="remarkup-list-item"><a href="http://phabricator.huobidev.com/w/product_design/risk/wallet_circuit_breaker/%E7%86%94%E6%96%AD%E6%97%A5%E5%BF%97/">熔断历史</a></li><li class="remarkup-list-item"><a href="http://phabricator.huobidev.com/w/product_design/risk/wallet_circuit_breaker/%E7%86%94%E6%96%AD%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/">熔断基础配置</a></li></ul></div></div></div></div></div><div id="conpherence-durable-column" class="conpherence-durable-column loading " style="display: none;" data-sigil="conpherence-durable-column"><div class="conpherence-durable-column-header grouped" data-sigil="conpherence-minimize-window"><div class="conpherence-durable-column-header-inner"><div class="aphlict-connection-status " id="UQ0_86"><span class="connection-status-text aphlict-connection-status-notenabled"><span class="visual-only phui-icon-view phui-font-fa fa-circle-o grey" data-meta="0_42" aria-hidden="true"></span>Notification server not enabled</span></div><div class="conpherence-durable-column-header-text" data-sigil="conpherence-durable-column-header-text"><span>Conpherence</span></div><ul class="phui-list-view phabricator-application-menu"><li class="phui-list-item-view phui-list-item-type-link phui-list-item-has-icon core-menu-item conpherence-settings-icon" id="UQ0_84" data-sigil="conpherence-settings-menu" data-autoid="autoid_4"><a href="http://phabricator.huobidev.com/w/product_design/risk/wallet_circuit_breaker/#" class="phui-list-item-href"><span class="aural-only">Room Actions</span><span class="visual-only phui-icon-view phui-font-fa fa-gear phui-list-item-icon" data-meta="0_43" aria-hidden="true"></span><span class="phui-list-item-name visual-only">Room Actions</span></a></li><li class="phui-list-item-view phui-list-item-type-link phui-list-item-has-icon core-menu-item conpherence-minimize-icon" data-sigil="conpherence-minimize-window"><a href="http://phabricator.huobidev.com/w/product_design/risk/wallet_circuit_breaker/#" class="phui-list-item-href"><span class="aural-only">Minimize Window</span><span class="visual-only phui-icon-view phui-font-fa fa-toggle-down phui-list-item-icon" data-meta="0_44" aria-hidden="true"></span><span class="phui-list-item-name visual-only">Minimize Window</span></a></li></ul><div id="UQ0_85" class="phabricator-main-menu-dropdown phui-list-sidenav conpherence-settings-dropdown" sigil="phabricator-notification-menu" style="display: none"><ul class="phui-list-view "><li class="phui-list-item-view phui-list-item-type-link phui-list-item-has-icon " data-meta="0_41" data-sigil="conpherence-durable-column-header-action"><a href="http://phabricator.huobidev.com/w/product_design/risk/wallet_circuit_breaker/#" class="phui-list-item-href"><span class="visual-only phui-icon-view phui-font-fa fa-times phui-list-item-icon" data-meta="0_40" aria-hidden="true"></span><span class="phui-list-item-name">Hide Window</span></a></li></ul></div></div></div><div class="conpherence-durable-column-body" data-sigil="conpherence-durable-column-body"><div class="conpherence-durable-column-icon-bar"></div><div class="conpherence-durable-column-main" data-sigil="conpherence-durable-column-main" data-autoid="autoid_10"><div id="conpherence-durable-column-content" class="conpherence-durable-column-frame"><div class="conpherence-durable-column-transactions" data-sigil="conpherence-durable-column-transactions">Loading...</div></div></div></div></div></div><script type="text/javascript" src="./⚡ 钱包熔断_files/core.pkg.js"></script><data data-javelin-init-kind="merge" data-javelin-init-data="{&quot;block&quot;:0,&quot;data&quot;:[{&quot;phid&quot;:&quot;PHID-FILE-f6eu4iqnw2jsbztd2g2v&quot;,&quot;uri&quot;:&quot;http:\/\/phabricator.huobidev.com\/file\/data\/gaolnnxvi7okzkpvced7\/PHID-FILE-f6eu4iqnw2jsbztd2g2v\/image.png&quot;,&quot;dUri&quot;:&quot;http:\/\/phabricator.huobidev.com\/file\/download\/gaolnnxvi7okzkpvced7\/PHID-FILE-f6eu4iqnw2jsbztd2g2v\/image.png&quot;,&quot;viewable&quot;:true,&quot;monogram&quot;:&quot;F782805&quot;},{&quot;phid&quot;:&quot;PHID-FILE-axvh2fmj775wiklie7la&quot;,&quot;uri&quot;:&quot;http:\/\/phabricator.huobidev.com\/file\/data\/6jz3jc6ak6e5ecsqmh6y\/PHID-FILE-axvh2fmj775wiklie7la\/image.png&quot;,&quot;dUri&quot;:&quot;http:\/\/phabricator.huobidev.com\/file\/download\/6jz3jc6ak6e5ecsqmh6y\/PHID-FILE-axvh2fmj775wiklie7la\/image.png&quot;,&quot;viewable&quot;:true,&quot;monogram&quot;:&quot;F773426&quot;},{&quot;phid&quot;:&quot;PHID-FILE-4wnvioqzbrjzcikdpq34&quot;,&quot;uri&quot;:&quot;http:\/\/phabricator.huobidev.com\/file\/data\/yempbifmyqhqcvj7duka\/PHID-FILE-4wnvioqzbrjzcikdpq34\/image.png&quot;,&quot;dUri&quot;:&quot;http:\/\/phabricator.huobidev.com\/file\/download\/yempbifmyqhqcvj7duka\/PHID-FILE-4wnvioqzbrjzcikdpq34\/image.png&quot;,&quot;viewable&quot;:true,&quot;monogram&quot;:&quot;F773428&quot;},{&quot;hoverPHID&quot;:&quot;PHID-USER-wbl66ovsgjbau46bqnl4&quot;},{&quot;hoverPHID&quot;:&quot;PHID-USER-qfxnpxoydc7jtpnizvm7&quot;},{&quot;hoverPHID&quot;:&quot;PHID-USER-bdgvqleakahaxuqabz3s&quot;},{&quot;map&quot;:{&quot;UQ0_1&quot;:&quot;phui-document-toc-open&quot;}},[],[],[],[],[],[],[],[],[],[],[],[],{&quot;hoverPHID&quot;:&quot;PHID-PROJ-qncdbh2gsn76wwl53t3h&quot;},{&quot;menuID&quot;:&quot;UQ0_0&quot;},[],[],[],[],{&quot;map&quot;:{&quot;UQ0_22&quot;:&quot;phabricator-search-menu-expanded&quot;,&quot;UQ0_45&quot;:&quot;menu-icon-selected&quot;}},{&quot;items&quot;:&quot;\u003cul class=\&quot;phabricator-action-list-view \&quot;\u003e\u003cli id=\&quot;UQ0_30\&quot; class=\&quot;phabricator-action-view phabricator-action-view-href phabricator-action-view-type-link\&quot; style=\&quot;\&quot;\u003e\u003ca href=\&quot;\/w\/create\/\&quot; class=\&quot;phabricator-action-view-item\&quot;\u003eNew Document\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\&quot;UQ0_32\&quot; class=\&quot;phabricator-action-view phabricator-action-view-href phabricator-action-view-type-link\&quot; style=\&quot;\&quot;\u003e\u003ca href=\&quot;\/w\/\/phriction\/\&quot; class=\&quot;phabricator-action-view-item\&quot;\u003eIndex\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\&quot;UQ0_34\&quot; class=\&quot;phabricator-action-view phabricator-action-view-type-label\&quot; style=\&quot;\&quot;\u003e\u003cspan class=\&quot;phabricator-action-view-item\&quot;\u003eQueries\u003c\/span\u003e\u003c\/li\u003e\u003cli id=\&quot;UQ0_36\&quot; class=\&quot;phabricator-action-view phabricator-action-view-href phabricator-action-view-type-link\&quot; style=\&quot;\&quot;\u003e\u003ca href=\&quot;\/phriction\/query\/active\/\&quot; class=\&quot;phabricator-action-view-item\&quot;\u003eActive\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\&quot;UQ0_38\&quot; class=\&quot;phabricator-action-view phabricator-action-view-href phabricator-action-view-type-link\&quot; style=\&quot;\&quot;\u003e\u003ca href=\&quot;\/phriction\/query\/all\/\&quot; class=\&quot;phabricator-action-view-item\&quot;\u003eAll\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\&quot;UQ0_40\&quot; class=\&quot;phabricator-action-view phabricator-action-view-href phabricator-action-view-type-link\&quot; style=\&quot;\&quot;\u003e\u003ca href=\&quot;\/phriction\/query\/edit\/\&quot; class=\&quot;phabricator-action-view-item\&quot;\u003eEdit Queries...\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\&quot;UQ0_42\&quot; class=\&quot;phabricator-action-view phabricator-action-view-type-label\&quot; style=\&quot;\&quot;\u003e\u003cspan class=\&quot;phabricator-action-view-item\&quot;\u003eSearch\u003c\/span\u003e\u003c\/li\u003e\u003cli id=\&quot;UQ0_44\&quot; class=\&quot;phabricator-action-view phabricator-action-view-href phabricator-action-view-type-link\&quot; style=\&quot;\&quot;\u003e\u003ca href=\&quot;\/phriction\/query\/advanced\/\&quot; class=\&quot;phabricator-action-view-item\&quot;\u003eAdvanced Search\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e&quot;},[],{&quot;items&quot;:[{&quot;name&quot;:&quot;Search&quot;},{&quot;icon&quot;:&quot;fa-globe&quot;,&quot;name&quot;:&quot;All Documents&quot;,&quot;value&quot;:&quot;all&quot;},{&quot;icon&quot;:&quot;fa-book&quot;,&quot;name&quot;:&quot;Current Application&quot;,&quot;value&quot;:&quot;application&quot;},{&quot;name&quot;:&quot;Saved Queries&quot;},{&quot;icon&quot;:&quot;fa-certificate&quot;,&quot;name&quot;:&quot;Open Documents&quot;,&quot;value&quot;:&quot;open&quot;},{&quot;icon&quot;:&quot;fa-certificate&quot;,&quot;name&quot;:&quot;Open Tasks&quot;,&quot;value&quot;:&quot;open-tasks&quot;},{&quot;name&quot;:&quot;More Options&quot;},{&quot;icon&quot;:&quot;fa-search-plus&quot;,&quot;name&quot;:&quot;Advanced Search&quot;,&quot;href&quot;:&quot;\/search\/query\/advanced\/&quot;},{&quot;icon&quot;:&quot;fa-book&quot;,&quot;name&quot;:&quot;User Guide: Search&quot;,&quot;href&quot;:&quot;https:\/\/secure.phabricator.com\/diviner\/find\/?name=Search+User+Guide&amp;type=article&amp;jump=1&quot;}],&quot;icon&quot;:&quot;fa-globe&quot;,&quot;value&quot;:&quot;all&quot;},[],[],{&quot;items&quot;:&quot;\u003cul class=\&quot;phabricator-action-list-view \&quot;\u003e\u003cli id=\&quot;UQ0_48\&quot; class=\&quot;phabricator-action-view phabricator-action-view-href phabricator-action-view-type-link\&quot; style=\&quot;\&quot;\u003e\u003ca href=\&quot;\/maniphest\/task\/edit\/form\/1\/\&quot; class=\&quot;phabricator-action-view-item\&quot;\u003eCreate Task\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\&quot;UQ0_50\&quot; class=\&quot;phabricator-action-view phabricator-action-view-href phabricator-action-view-type-link\&quot; style=\&quot;\&quot;\u003e\u003ca href=\&quot;\/project\/edit\/form\/21\/\&quot; class=\&quot;phabricator-action-view-item\&quot;\u003eCreate Project\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\&quot;UQ0_52\&quot; class=\&quot;phabricator-action-view phabricator-action-view-href phabricator-action-view-type-link\&quot; style=\&quot;\&quot;\u003e\u003ca href=\&quot;\/diffusion\/edit\/form\/default\/\&quot; class=\&quot;phabricator-action-view-item\&quot;\u003eCreate Repository\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\&quot;UQ0_54\&quot; class=\&quot;phabricator-action-view phabricator-action-view-type-divider\&quot; style=\&quot;\&quot;\u003e\u003cspan class=\&quot;phabricator-action-view-item\&quot;\u003e\u003c\/span\u003e\u003c\/li\u003e\u003cli id=\&quot;UQ0_56\&quot; class=\&quot;phabricator-action-view phabricator-action-view-href\&quot; style=\&quot;\&quot;\u003e\u003ca href=\&quot;\/favorites\/menu\/configure\/\&quot; class=\&quot;phabricator-action-view-item\&quot;\u003eEdit Favorites\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e&quot;},[],[],[],[],[],[],[],[],[],{&quot;action&quot;:&quot;hide_column&quot;},[],[],[]]}"></data><data data-javelin-init-kind="behaviors" data-javelin-init-data="{&quot;refresh-csrf&quot;:[{&quot;tokenName&quot;:&quot;__csrf__&quot;,&quot;header&quot;:&quot;X-Phabricator-Csrf&quot;,&quot;viaHeader&quot;:&quot;X-Phabricator-Via&quot;,&quot;current&quot;:&quot;B@aqnpbtqqbb16fa6c02422f1a&quot;}],&quot;history-install&quot;:[]}"></data><data data-javelin-init-kind="behaviors" data-javelin-init-data="{&quot;phui-hovercards&quot;:[],&quot;phabricator-reveal-content&quot;:[],&quot;phui-dropdown-menu&quot;:[],&quot;workflow&quot;:[],&quot;detect-timezone&quot;:[{&quot;offset&quot;:-480,&quot;uri&quot;:&quot;\/settings\/timezone\/&quot;,&quot;message&quot;:&quot;Your browser timezone setting differs from the timezone setting in your profile, click to reconcile.&quot;,&quot;ignoreKey&quot;:&quot;time.offset.ignore&quot;,&quot;ignore&quot;:null}],&quot;lightbox-attachments&quot;:[],&quot;aphront-form-disable-on-submit&quot;:[],&quot;toggle-class&quot;:[],&quot;phabricator-gesture&quot;:[],&quot;device&quot;:[],&quot;high-security-warning&quot;:[{&quot;show&quot;:false,&quot;uri&quot;:&quot;\/auth\/session\/downgrade\/&quot;,&quot;message&quot;:&quot;Your session is in high security mode. When you finish using it, click here to leave.&quot;}],&quot;aphlict-dropdown&quot;:[{&quot;bubbleID&quot;:&quot;UQ0_23&quot;,&quot;countID&quot;:&quot;UQ0_24&quot;,&quot;dropdownID&quot;:&quot;UQ0_25&quot;,&quot;loadingText&quot;:&quot;Loading...&quot;,&quot;uri&quot;:&quot;\/conpherence\/panel\/&quot;,&quot;countType&quot;:&quot;messages&quot;,&quot;countNumber&quot;:0,&quot;unreadClass&quot;:&quot;message-unread&quot;,&quot;favicon&quot;:&quot;http:\/\/phabricator.huobidev.com\/file\/data\/d4iomwdic4tth23es3rp\/PHID-FILE-legkto3b62wizgdeit6e\/favicon&quot;,&quot;message_favicon&quot;:&quot;http:\/\/phabricator.huobidev.com\/file\/data\/zbyodahcylbahvgozq6o\/PHID-FILE-cv3z5xdubom2t2howc4f\/favicon&quot;},{&quot;bubbleID&quot;:&quot;UQ0_28&quot;,&quot;countID&quot;:&quot;UQ0_26&quot;,&quot;dropdownID&quot;:&quot;UQ0_27&quot;,&quot;loadingText&quot;:&quot;Loading...&quot;,&quot;uri&quot;:&quot;\/notification\/panel\/&quot;,&quot;countType&quot;:&quot;notifications&quot;,&quot;countNumber&quot;:0,&quot;unreadClass&quot;:&quot;alert-unread&quot;,&quot;favicon&quot;:&quot;http:\/\/phabricator.huobidev.com\/file\/data\/d4iomwdic4tth23es3rp\/PHID-FILE-legkto3b62wizgdeit6e\/favicon&quot;,&quot;message_favicon&quot;:&quot;http:\/\/phabricator.huobidev.com\/file\/data\/zbyodahcylbahvgozq6o\/PHID-FILE-cv3z5xdubom2t2howc4f\/favicon&quot;},{&quot;bubbleID&quot;:&quot;UQ0_84&quot;,&quot;dropdownID&quot;:&quot;UQ0_85&quot;,&quot;local&quot;:true,&quot;containerDivID&quot;:&quot;conpherence-durable-column&quot;}],&quot;phabricator-keyboard-shortcuts&quot;:[{&quot;helpURI&quot;:&quot;\/help\/keyboardshortcut\/&quot;,&quot;searchID&quot;:&quot;UQ0_46&quot;,&quot;pht&quot;:{&quot;\/&quot;:&quot;Give keyboard focus to the search box.&quot;,&quot;?&quot;:&quot;Show keyboard shortcut help for the current page.&quot;}}],&quot;user-menu&quot;:[{&quot;menuID&quot;:&quot;UQ0_57&quot;,&quot;menu&quot;:{&quot;items&quot;:&quot;\u003cul class=\&quot;phabricator-action-list-view \&quot;\u003e\u003cli id=\&quot;UQ0_59\&quot; class=\&quot;phabricator-action-view\&quot; style=\&quot;\&quot;\u003e\u003cspan class=\&quot;phabricator-action-view-item\&quot;\u003e\u003cul class=\&quot;phui-oi-list-view phui-oi-list-flush phui-oi-list-simple phabricator-core-user-profile-object\&quot;\u003e\u003cli class=\&quot;phui-oi phui-oi-no-bar phui-oi-with-image phui-oi-standard\&quot; data-sigil=\&quot;\&quot;\u003e\u003cdiv class=\&quot;phui-oi-frame\&quot;\u003e\u003cdiv class=\&quot;phui-oi-frame-content\&quot;\u003e\u003cdiv class=\&quot;phui-oi-image\&quot; style=\&quot;background-image: url(http:\/\/phabricator.huobidev.com\/file\/data\/xwwpo3xnzrt34zuevn4e\/PHID-FILE-yulqo4mmechuh6yyq4rf\/d898be-alphanumeric_lato-white_L.png-0%2C0%2C0%2C0.3.png)\&quot;\u003e\u003c\/div\u003e\u003cdiv class=\&quot;phui-oi-content-box\&quot;\u003e\u003cdiv class=\&quot;phui-oi-table\&quot;\u003e\u003cdiv class=\&quot;phui-oi-table-row\&quot;\u003e\u003cdiv class=\&quot;phui-oi-col1\&quot;\u003e\u003cdiv class=\&quot;phui-oi-name\&quot;\u003e\u003cspan data-sigil=\&quot;slippery\&quot;\u003e\u003cspan class=\&quot;phui-oi-objname\&quot;\u003e\u674e\u822a\u003c\/span\u003e \u003cdiv class=\&quot;phui-oi-link\&quot;\u003e\u003c\/div\u003e\u003c\/span\u003e\u003c\/div\u003e\u003cdiv class=\&quot;phui-oi-content\&quot;\u003e\u003cdiv class=\&quot;phui-oi-subhead\&quot;\u003elihang\u003c\/div\u003e\u003c\/div\u003e\u003c\/div\u003e\u003c\/div\u003e\u003c\/div\u003e\u003c\/div\u003e\u003c\/div\u003e\u003c\/div\u003e\u003c\/li\u003e\u003c\/ul\u003e\u003c\/span\u003e\u003c\/li\u003e\u003cli id=\&quot;UQ0_61\&quot; class=\&quot;phabricator-action-view phabricator-action-view-type-divider\&quot; style=\&quot;\&quot;\u003e\u003cspan class=\&quot;phabricator-action-view-item\&quot;\u003e\u003c\/span\u003e\u003c\/li\u003e\u003cli id=\&quot;UQ0_63\&quot; class=\&quot;phabricator-action-view phabricator-action-view-href\&quot; style=\&quot;\&quot;\u003e\u003ca href=\&quot;\/p\/lihang\/\&quot; class=\&quot;phabricator-action-view-item\&quot;\u003eProfile\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\&quot;UQ0_65\&quot; class=\&quot;phabricator-action-view phabricator-action-view-href\&quot; style=\&quot;\&quot;\u003e\u003ca href=\&quot;\/settings\/user\/lihang\/\&quot; class=\&quot;phabricator-action-view-item\&quot;\u003eSettings\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\&quot;UQ0_67\&quot; class=\&quot;phabricator-action-view phabricator-action-view-href\&quot; style=\&quot;\&quot;\u003e\u003ca href=\&quot;\/people\/manage\/1602\/\&quot; class=\&quot;phabricator-action-view-item\&quot;\u003eManage\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\&quot;UQ0_69\&quot; class=\&quot;phabricator-action-view phabricator-action-view-type-divider\&quot; style=\&quot;\&quot;\u003e\u003cspan class=\&quot;phabricator-action-view-item\&quot; data-sigil=\&quot;help-item\&quot;\u003e\u003c\/span\u003e\u003c\/li\u003e\u003cli id=\&quot;UQ0_71\&quot; class=\&quot;phabricator-action-view phabricator-action-view-href\&quot; style=\&quot;\&quot;\u003e\u003ca href=\&quot;https:\/\/secure.phabricator.com\/diviner\/find\/?name=Phriction+User+Guide&amp;amp;type=article&amp;amp;jump=1\&quot; class=\&quot;phabricator-action-view-item\&quot; target=\&quot;_blank\&quot; rel=\&quot;noreferrer\&quot; data-sigil=\&quot;help-item\&quot;\u003ePhriction User Guide\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\&quot;UQ0_73\&quot; class=\&quot;phabricator-action-view phabricator-action-view-type-divider\&quot; style=\&quot;\&quot;\u003e\u003cspan class=\&quot;phabricator-action-view-item\&quot; data-sigil=\&quot;logout-item\&quot;\u003e\u003c\/span\u003e\u003c\/li\u003e\u003cli id=\&quot;UQ0_75\&quot; class=\&quot;phabricator-action-view phabricator-action-view-href\&quot; style=\&quot;\&quot;\u003e\u003ca href=\&quot;\/logout\/\&quot; class=\&quot;phabricator-action-view-item\&quot; data-sigil=\&quot;workflow logout-item\&quot;\u003eLog Out lihang\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e&quot;}}],&quot;phabricator-search-typeahead&quot;:[{&quot;id&quot;:&quot;UQ0_76&quot;,&quot;input&quot;:&quot;UQ0_46&quot;,&quot;button&quot;:&quot;UQ0_77&quot;,&quot;selectorID&quot;:&quot;UQ0_78&quot;,&quot;applicationID&quot;:&quot;UQ0_79&quot;,&quot;defaultApplicationIcon&quot;:&quot;fa-dot-circle-o&quot;,&quot;appScope&quot;:&quot;application&quot;,&quot;src&quot;:&quot;\/typeahead\/class\/PhabricatorSearchDatasource\/&quot;,&quot;limit&quot;:10,&quot;placeholder&quot;:&quot;Search&quot;,&quot;scopeUpdateURI&quot;:&quot;\/settings\/adjust\/?key=search-scope&quot;}],&quot;quicksand-blacklist&quot;:[{&quot;patterns&quot;:[&quot;\/phame\/live\/.*&quot;,&quot;\/conpherence\/.*&quot;,&quot;\/Z\\d+&quot;,&quot;\/file\/(data|download)\/.*&quot;,&quot;\/phortune\/.*&quot;,&quot;\/auth\/.*&quot;]}],&quot;durable-column&quot;:[{&quot;visible&quot;:false,&quot;minimize&quot;:false,&quot;visibleURI&quot;:&quot;\/settings\/adjust\/?key=conpherence-column&quot;,&quot;minimizeURI&quot;:&quot;\/settings\/adjust\/?key=conpherence-minimize-column&quot;,&quot;quicksandConfig&quot;:{&quot;title&quot;:&quot;\u26a1 \u94b1\u5305\u7194\u65ad&quot;,&quot;bodyClasses&quot;:&quot;device-desktop platform-mac phui-theme-blindigo&quot;,&quot;aphlictDropdownData&quot;:[{&quot;isInstalled&quot;:true,&quot;countType&quot;:&quot;notifications&quot;,&quot;count&quot;:0,&quot;rawCount&quot;:0},{&quot;isInstalled&quot;:true,&quot;countType&quot;:&quot;messages&quot;,&quot;count&quot;:0,&quot;rawCount&quot;:0}],&quot;globalDragAndDrop&quot;:false,&quot;hisecWarningConfig&quot;:{&quot;show&quot;:false,&quot;uri&quot;:&quot;\/auth\/session\/downgrade\/&quot;,&quot;message&quot;:&quot;Your session is in high security mode. When you finish using it, click here to leave.&quot;},&quot;consoleConfig&quot;:null,&quot;applicationClass&quot;:&quot;PhabricatorPhrictionApplication&quot;,&quot;applicationSearchIcon&quot;:&quot;fa-book&quot;,&quot;helpItems&quot;:{&quot;items&quot;:&quot;\u003cul class=\&quot;phabricator-action-list-view \&quot;\u003e\u003cli id=\&quot;UQ0_81\&quot; class=\&quot;phabricator-action-view phabricator-action-view-type-divider\&quot; style=\&quot;\&quot;\u003e\u003cspan class=\&quot;phabricator-action-view-item\&quot; data-sigil=\&quot;help-item\&quot;\u003e\u003c\/span\u003e\u003c\/li\u003e\u003cli id=\&quot;UQ0_83\&quot; class=\&quot;phabricator-action-view phabricator-action-view-href\&quot; style=\&quot;\&quot;\u003e\u003ca href=\&quot;https:\/\/secure.phabricator.com\/diviner\/find\/?name=Phriction+User+Guide&amp;amp;type=article&amp;amp;jump=1\&quot; class=\&quot;phabricator-action-view-item\&quot; target=\&quot;_blank\&quot; rel=\&quot;noreferrer\&quot; data-sigil=\&quot;help-item\&quot;\u003ePhriction User Guide\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e&quot;},&quot;pageObjects&quot;:{&quot;PHID-WIKI-2dmdhuh26zojoxb666tb&quot;:true},&quot;subscriptions&quot;:[&quot;PHID-WIKI-2dmdhuh26zojoxb666tb&quot;,&quot;PHID-USER-jqorpiz3esirawejkqtn&quot;]}}],&quot;aphlict-status&quot;:[{&quot;nodeID&quot;:&quot;UQ0_86&quot;,&quot;pht&quot;:{&quot;setup&quot;:&quot;Setting Up Client&quot;,&quot;open&quot;:&quot;Connected&quot;,&quot;closed&quot;:&quot;Disconnected&quot;},&quot;icon&quot;:{&quot;open&quot;:{&quot;icon&quot;:&quot;fa-circle&quot;,&quot;color&quot;:&quot;green&quot;},&quot;setup&quot;:{&quot;icon&quot;:&quot;fa-circle&quot;,&quot;color&quot;:&quot;yellow&quot;},&quot;closed&quot;:{&quot;icon&quot;:&quot;fa-circle&quot;,&quot;color&quot;:&quot;red&quot;}}}]}"></data></body></html>